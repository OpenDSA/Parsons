<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Demo</title>

    <link rel="stylesheet" type="text/css" href="../src/css/parsons.css" />

    <!--eBookConfig Setup-->
    <script type="text/javascript">
        if(typeof eBookConfig === "undefined") {
            eBookConfig = {};
        }
        eBookConfig.host = '';
        eBookConfig.app = eBookConfig.host+'/runestone';
        eBookConfig.ajaxURL = eBookConfig.app+'/ajax/';
        eBookConfig.course = "";
        eBookConfig.logLevel = 10;
        eBookConfig.username = ""
        eBookConfig.email = ""
        eBookConfig.isPlaygroundEnv = true;
        eBookConfig.isInstructor = true;
        eBookConfig.isLoggedIn = false;
        eBookConfig.useRunestoneServices = false;
        eBookConfig.gradeRecordingUrl = `${eBookConfig.app}/assignments/record_grade`;
        eBookConfig.new_server_prefix = "/ns";
        eBookConfig.websocketUrl = "{{settings.websocket_url}}"
        eBookConfig.enableDebug = true ? "{{settings.debug}}" == "True" : false;
        eBookConfig.served_by = "TBD"
    </script>
    <script src="../src/lib/jquery-3.7.1.min.js"></script>
    <script src="../src/lib/jquery_i18n/jquery.i18n.js"></script>
    <script src="../src/lib/jquery_i18n/jquery.i18n.emitter.js"></script>
    <script src="../src/lib/jquery_i18n/jquery.i18n.emitter.bidi.js"></script>
    <script src="../src/lib/jquery_i18n/jquery.i18n.fallbacks.js"></script>
    <script src="../src/lib/jquery_i18n/jquery.i18n.language.js"></script>
    <script src="../src/lib/jquery_i18n/jquery.i18n.messagestore.js"></script>
    <script src="../src/lib/jquery_i18n/jquery.i18n.parser.js"></script>


    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <script>
        var runestoneMathReady = new Promise((resolve) => window.rsMathReady = resolve);
        window.MathJax = {
            "tex": {
                "inlineMath": [
                    [
                        "\\(",
                        "\\)"
                    ]
                ],
                "tags": "none",
                "tagSide": "right",
                "tagIndent": ".8em",
                "packages": {
                    "[+]": [
                        "base",
                        "extpfeil",
                        "ams",
                        "amscd",
                        "color",
                        "newcommand",
                        "knowl"
                    ]
                }
            },
            "options": {
                "ignoreHtmlClass": "tex2jax_ignore|ignore-math",
                "processHtmlClass": "process-math",
                "renderActions": {
                    "findScript": [
                        10,
                        function (doc) {
                            document.querySelectorAll('script[type^="math/tex"]').forEach(function(node) {
                                var display = !!node.type.match(/; *mode=display/);
                                var math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
                                var text = document.createTextNode('');
                                node.parentNode.replaceChild(text, node);
                                math.start = {node: text, delim: '', n: 0};
                                math.end = {node: text, delim: '', n: 0};
                                doc.math.push(math);
                            });
                        },
                        ""
                    ]
                }
            },
            "chtml": {
                "scale": 0.98,
                "mtextInheritFont": true
            },
            "loader": {
                "load": [
                    "input/asciimath",
                    "[tex]/extpfeil",
                    "[tex]/amscd",
                    "[tex]/color",
                    "[tex]/newcommand",
                ],
                "paths": {
                    "pretext": "_static/pretext/js/lib"
                }
            },
            "startup": {
                pageReady() {
                    return MathJax.startup.defaultPageReady().then(function () {
                            console.log("in ready function");
                            rsMathReady();
                        }
                    )}
            }
        };
    </script>

    <script language="javascript" type="text/javascript" src="./lib/edit_area/edit_area_full.js"></script>
    <script language="javascript" type="text/javascript">
        editAreaLoader.init({
            id : "playground-editor"		// textarea id
            ,syntax: "css"			// syntax to be uses for highgliting
            ,start_highlight: false		// to display with highlight mode on start-up
            ,display: "later"
        });
    </script>


</head>
<body>
<h2>Parsons Playground</h2>

<p>This is a playground for constructing parsons problems on the fly without having to build books.</p>
<p>We currently support Runestone's RST and PreTeXt formats.</p>
<p>Upload an RST file and click on Load then Render </p>

<h3> Getting Started </h3>

<label for="myFile">Select an RST file to render:</label>
<br>
<input type="file" id="myFile" name="myFile" accept=".rst">

<button id="submit-btn">Load Exercise</button>
<button id="compile-btn">Render All New Exercises</button>
<p id="input-file-error" style="color: red"></p>
<p>Some examples can be found in the test-inputs directory
</p>

<!--<label>-->
<!--    <textarea id="playground-editor" style="min-width: 50%;min-height: 30vh;max-width: 80%; max-height: 50vh;display: flex; margin-left: auto;margin-right: auto" ></textarea>-->
<!--</label>-->
<label>
    <textarea id="playground-editor" name="content" cols="80" rows="15"></textarea>
</label>


<div id="display-area">
    <div data-component="parsons" id="pa-ex1" class="parsons" >
        <div class="parsons_question parsons-text" >
            <p>Construct a block of code that correctly implements
                the <strong>accumulator</strong> pattern.</p>

        </div>
        <pre  class="parsonsblocks" data-question_label="2.3.1"          style="visibility: hidden;">
        x = 0
for i in range(10):
    x = x + 1
        </pre>
    </div>
</div>



<script src="../dist/main.js">
</script>

</body>
</html>